__d((function(_g,_r,_i,_a,_m,_e,_d){var e=_r(_d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.LiveAudioVisualizer=_e.AudioVisualizer=void 0;var t=e(_r(_d[1])),r=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o})(_r(_d[2]));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach((function(r){(0,t.default)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i,c={exports:{}},u={};
/**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */c.exports=(function(){if(i)return u;i=1;var e=r.default,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,r,n){var i,u={},l=null,s=null;for(i in void 0!==n&&(l=""+n),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(s=r.ref),r)o.call(r,i)&&!c.hasOwnProperty(i)&&(u[i]=r[i]);if(e&&e.defaultProps)for(i in r=e.defaultProps)void 0===u[i]&&(u[i]=r[i]);return{$$typeof:t,type:e,key:l,ref:s,props:u,_owner:a.current}}return u.Fragment=n,u.jsx=l,u.jsxs=l,u})();var l=c.exports;const s=(e,t,r,n)=>{let o=t/(r+n),a=Math.floor(e.length/o);o>e.length&&(o=e.length,a=1);const i=[];for(let t=0;t<o;t++){let r=0;for(let n=0;n<a&&t*a+n<e.length;n++)r+=e[t*a+n];i.push(r/a)}return i},f=(e,t,r,n,o,a)=>{const i=t.height/2,c=t.getContext("2d");c&&(c.clearRect(0,0,t.width,t.height),"transparent"!==o&&(c.fillStyle=o,c.fillRect(0,0,t.width,t.height)),e.forEach(((e,t)=>{c.fillStyle=a;const o=t*(r+n),u=i-e/2,l=r,s=e||1;c.beginPath(),c.roundRect?(c.roundRect(o,u,l,s,50),c.fill()):c.fillRect(o,u,l,s)})))},d=(e,t,r,n,o)=>{const a=e.getChannelData(0),i=r/(n+o),c=Math.floor(a.length/i),u=t/2;let l=[],s=0;for(let t=0;t<i;t++){const r=[];let n=0;const o=[];let i=0;for(let u=0;u<c&&t*c+u<e.length;u++){const e=a[t*c+u];e<=0&&(r.push(e),n++),e>0&&(o.push(e),i++)}const u=r.reduce(((e,t)=>e+t),0)/n,f={max:o.reduce(((e,t)=>e+t),0)/i,min:u};f.max>s&&(s=f.max),Math.abs(f.min)>s&&(s=Math.abs(f.min)),l.push(f)}if(.8*u>s*u){const e=.8*u/s;l=l.map((t=>({max:t.max*e,min:t.min*e})))}return l},h=(e,t,r,n,o,a,i,c=0,u=1)=>{const l=t.height/2,s=t.getContext("2d");if(!s)return;s.clearRect(0,0,t.width,t.height),"transparent"!==o&&(s.fillStyle=o,s.fillRect(0,0,t.width,t.height));const f=(c||0)/u;e.forEach(((t,o)=>{const c=o/e.length,u=f>c;s.fillStyle=u&&i?i:a;const d=o*(r+n),h=l+t.min,p=r,g=l+t.max-h;s.beginPath(),s.roundRect?(s.roundRect(d,h,p,g,50),s.fill()):s.fillRect(d,h,p,g)}))},p=_e.AudioVisualizer=(0,r.forwardRef)((({blob:e,width:t,height:n,barWidth:o=2,gap:i=1,currentTime:c,style:u,backgroundColor:s="transparent",barColor:f="rgb(184, 184, 184)",barPlayedColor:p="rgb(160, 198, 255)"},g)=>{const y=(0,r.useRef)(null),[b,m]=(0,r.useState)([]),[O,w]=(0,r.useState)(0);return(0,r.useImperativeHandle)(g,(()=>y.current),[]),(0,r.useEffect)((()=>{(async()=>{if(!y.current)return;if(!e){const e=Array.from({length:100},(()=>({max:0,min:0})));return void h(e,y.current,o,i,s,f,p)}const r=await e.arrayBuffer();await(new AudioContext).decodeAudioData(r,(e=>{if(!y.current)return;w(e.duration);const r=d(e,n,t,o,i);m(r),h(r,y.current,o,i,s,f,p)}))})()}),[e,y.current]),(0,r.useEffect)((()=>{y.current&&h(b,y.current,o,i,s,f,p,c,O)}),[c,O]),l.jsx("canvas",{ref:y,width:t,height:n,style:a({},u)})}));_e.LiveAudioVisualizer=({mediaRecorder:e,width:t="100%",height:n="100%",barWidth:o=2,gap:a=1,backgroundColor:i="transparent",barColor:c="rgb(160, 198, 255)",fftSize:u=1024,maxDecibels:d=-10,minDecibels:h=-90,smoothingTimeConstant:p=.4})=>{const[g]=(0,r.useState)((()=>new AudioContext)),[y,b]=(0,r.useState)(),m=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(!e.stream)return;const t=g.createAnalyser();b(t),t.fftSize=u,t.minDecibels=h,t.maxDecibels=d,t.smoothingTimeConstant=p,g.createMediaStreamSource(e.stream).connect(t)}),[e.stream]),(0,r.useEffect)((()=>{y&&"recording"===e.state&&O()}),[y,e.state]);const O=(0,r.useCallback)((()=>{if(!y)return;const t=new Uint8Array(null==y?void 0:y.frequencyBinCount);"recording"===e.state?(null==y||y.getByteFrequencyData(t),w(t),requestAnimationFrame(O)):"paused"===e.state?w(t):"inactive"===e.state&&"closed"!==g.state&&g.close()}),[y,g.state]),w=e=>{if(!m.current)return;const t=s(e,m.current.width,o,a);f(t,m.current,o,a,i,c)};return l.jsx("canvas",{ref:m,width:t,height:n,style:{aspectRatio:"unset"}})},p.displayName="AudioVisualizer"}),1412,[1,6,14]);